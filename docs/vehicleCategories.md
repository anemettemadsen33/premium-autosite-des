# Vehicle Categories & Sub-Categories

This document provides comprehensive reference for the vehicle categorization system based on mobile.de's official category codes.

## Overview

The categorization system consists of:
- **Main Categories**: High-level vehicle types (e.g., Car, Motorbike, Truck)
- **Sub-Categories**: Specific classifications within each main category (e.g., Car.Cabrio, Motorbike.Touring)

All category codes follow the mobile.de Upload-Interface CSV specification format.

## Main Categories

| Code | Label (EN) | Label (DE) |
|------|------------|------------|
| `Car` | Cars | Pkw |
| `Motorbike` | Motorcycles | Motorräder |
| `VanUpTo7500` | Vans (up to 7.5t) | Transporter (bis 7,5t) |
| `TruckOver7500` | Trucks (over 7.5t) | Lkw (über 7,5t) |
| `ConstructionMachine` | Construction Machinery | Baumaschinen |
| `AgriculturalVehicle` | Agricultural Vehicles | Landmaschinen |
| `Trailer` | Trailers | Anhänger |
| `Caravan` | Caravans & Motorhomes | Wohnwagen & Wohnmobile |
| `SemiTrailer` | Semi-Trailers | Auflieger |
| `Parts` | Parts & Accessories | Teile & Zubehör |

## Sub-Categories by Main Category

### Car

| Code | Label (EN) | Label (DE) |
|------|------------|------------|
| `Car.SmallCar` | Small Car | Kleinwagen |
| `Car.Cabrio` | Convertible/Cabrio | Cabrio |
| `Car.Sedan` | Sedan/Saloon | Limousine |
| `Car.Coupe` | Coupe | Coupé |
| `Car.SUV` | SUV/Off-road | SUV/Geländewagen |
| `Car.Estate` | Estate/Station Wagon | Kombi |
| `Car.Van` | Van/Minibus | Van/Kleinbus |
| `Car.OffRoad` | Off-road | Geländewagen |
| `Car.SportsCar` | Sports Car | Sportwagen |
| `Car.Other` | Other | Sonstige |

### Motorbike

| Code | Label (EN) | Label (DE) |
|------|------------|------------|
| `Motorbike.Naked` | Naked Bike | Naked Bike |
| `Motorbike.Touring` | Touring | Tourer |
| `Motorbike.Sport` | Sport/Supersport | Sportler/Supersportler |
| `Motorbike.Enduro` | Enduro | Enduro |
| `Motorbike.Scooter` | Scooter | Roller |
| `Motorbike.Chopper` | Chopper/Cruiser | Chopper/Cruiser |
| `Motorbike.Quad` | Quad/ATV | Quad/ATV |
| `Motorbike.Trike` | Trike | Trike |
| `Motorbike.Classic` | Classic/Oldtimer | Oldtimer |
| `Motorbike.Trial` | Trial | Trial |
| `Motorbike.Cross` | Motocross | Motocross |
| `Motorbike.Other` | Other | Sonstige |

### VanUpTo7500

| Code | Label (EN) | Label (DE) |
|------|------------|------------|
| `VanUpTo7500.BoxBody` | Box Body | Koffer |
| `VanUpTo7500.Chassis` | Chassis Cab | Fahrgestell |
| `VanUpTo7500.ClosedBox` | Closed Box | Geschlossener Kasten |
| `VanUpTo7500.FlatbedDropside` | Flatbed/Dropside | Pritsche/Plane |
| `VanUpTo7500.Platform` | Platform | Pritsche |
| `VanUpTo7500.Refrigerated` | Refrigerated | Kühlwagen |
| `VanUpTo7500.Tipper` | Tipper | Kipper |
| `VanUpTo7500.WindowVan` | Window Van | Kastenwagen |
| `VanUpTo7500.Other` | Other | Sonstige |

### TruckOver7500

| Code | Label (EN) | Label (DE) |
|------|------------|------------|
| `TruckOver7500.BoxBody` | Box Body | Koffer |
| `TruckOver7500.Chassis` | Chassis Cab | Fahrgestell |
| `TruckOver7500.CurtainSider` | Curtain Sider | Plane |
| `TruckOver7500.FlatbedDropside` | Flatbed/Dropside | Pritsche |
| `TruckOver7500.HookLift` | Hook Lift | Abrollkipper |
| `TruckOver7500.Refrigerated` | Refrigerated | Kühlwagen |
| `TruckOver7500.Tipper` | Tipper | Kipper |
| `TruckOver7500.TankTruck` | Tank Truck | Tankwagen |
| `TruckOver7500.CarTransporter` | Car Transporter | Autotransporter |
| `TruckOver7500.Concrete` | Concrete Mixer | Betonmischer |
| `TruckOver7500.Other` | Other | Sonstige |

### ConstructionMachine

| Code | Label (EN) | Label (DE) |
|------|------------|------------|
| `ConstructionMachine.MiniExcavator` | Mini Excavator | Minibagger |
| `ConstructionMachine.CrawlerExcavator` | Crawler Excavator | Raupenbagger |
| `ConstructionMachine.WheelExcavator` | Wheel Excavator | Mobilbagger |
| `ConstructionMachine.WheelLoader` | Wheel Loader | Radlader |
| `ConstructionMachine.Bulldozer` | Bulldozer | Planierraupe |
| `ConstructionMachine.Grader` | Grader | Grader |
| `ConstructionMachine.Roller` | Roller/Compactor | Walze |
| `ConstructionMachine.Dumper` | Dumper | Dumper |
| `ConstructionMachine.TeleHandler` | Telehandler | Teleskoplader |
| `ConstructionMachine.SkidSteer` | Skid Steer Loader | Kompaktlader |
| `ConstructionMachine.Crane` | Crane | Kran |
| `ConstructionMachine.Other` | Other | Sonstige |

### AgriculturalVehicle

| Code | Label (EN) | Label (DE) |
|------|------------|------------|
| `AgriculturalVehicle.Tractor` | Tractor | Traktor |
| `AgriculturalVehicle.CombineHarvester` | Combine Harvester | Mähdrescher |
| `AgriculturalVehicle.Baler` | Baler | Ballenpresse |
| `AgriculturalVehicle.Forage` | Forage Harvester | Feldhäcksler |
| `AgriculturalVehicle.Sprayer` | Sprayer | Feldspritze |
| `AgriculturalVehicle.Plough` | Plough/Plow | Pflug |
| `AgriculturalVehicle.Other` | Other | Sonstige |

### Trailer

| Code | Label (EN) | Label (DE) |
|------|------------|------------|
| `Trailer.BoxTrailer` | Box Trailer | Kofferanhänger |
| `Trailer.CarTransporter` | Car Transporter | Autotransporter |
| `Trailer.CurtainSider` | Curtain Sider | Planenanhänger |
| `Trailer.Flatbed` | Flatbed | Pritschenanhänger |
| `Trailer.Refrigerated` | Refrigerated | Kühlanhänger |
| `Trailer.Tipper` | Tipper | Kipperanhänger |
| `Trailer.Other` | Other | Sonstige |

### Caravan

| Code | Label (EN) | Label (DE) |
|------|------------|------------|
| `Caravan.Caravan` | Caravan/Travel Trailer | Wohnwagen |
| `Caravan.Motorhome` | Motorhome/RV | Wohnmobil |
| `Caravan.CamperVan` | Camper Van | Kastenwagen |
| `Caravan.Other` | Other | Sonstige |

### SemiTrailer

| Code | Label (EN) | Label (DE) |
|------|------------|------------|
| `SemiTrailer.BoxBody` | Box Body | Koffer |
| `SemiTrailer.CurtainSider` | Curtain Sider | Plane |
| `SemiTrailer.Flatbed` | Flatbed | Pritsche |
| `SemiTrailer.LowLoader` | Low Loader | Tieflader |
| `SemiTrailer.Refrigerated` | Refrigerated | Kühlauflieger |
| `SemiTrailer.Tipper` | Tipper | Kipperauflieger |
| `SemiTrailer.TankTrailer` | Tank Trailer | Tankauflieger |
| `SemiTrailer.CarTransporter` | Car Transporter | Autotransporter |
| `SemiTrailer.Other` | Other | Sonstige |

### Parts

| Code | Label (EN) | Label (DE) |
|------|------------|------------|
| `Parts.Engine` | Engine & Components | Motor & Komponenten |
| `Parts.Transmission` | Transmission | Getriebe |
| `Parts.Suspension` | Suspension | Fahrwerk |
| `Parts.Brakes` | Brakes | Bremsen |
| `Parts.Exhaust` | Exhaust System | Abgasanlage |
| `Parts.Body` | Body Parts | Karosserieteile |
| `Parts.Interior` | Interior | Innenausstattung |
| `Parts.Electrical` | Electrical | Elektrik |
| `Parts.Wheels` | Wheels & Tires | Räder & Reifen |
| `Parts.Other` | Other Parts | Sonstige Teile |

## Usage in Code

### TypeScript Types

```typescript
import type { MainCategory, VehicleSubCategoryCode } from '@/lib/vehicleSubCategories'

// Main category example
const mainCategory: MainCategory = 'Car'

// Sub-category example
const subCategory: VehicleSubCategoryCode = 'Car.Cabrio'
```

### Getting Sub-Categories for a Main Category

```typescript
import { getSubCategoriesByMainCategory } from '@/lib/vehicleSubCategories'

const carSubCategories = getSubCategoriesByMainCategory('Car')
// Returns all Car.* sub-categories
```

### Using the Hook

```typescript
import { useVehicleSubCategories } from '@/hooks/use-vehicle-sub-categories'

function MyComponent() {
  const [mainCategory, setMainCategory] = useState<MainCategory>('Motorbike')
  const subCategories = useVehicleSubCategories(mainCategory)
  
  // subCategories will automatically update when mainCategory changes
}
```

### Validation

```typescript
import { validateSubCategoryForMainCategory } from '@/lib/vehicleSubCategories'

const isValid = validateSubCategoryForMainCategory('Car', 'Car.Cabrio') // true
const isInvalid = validateSubCategoryForMainCategory('Car', 'Motorbike.Touring') // false
```

### Form Validation with Zod

```typescript
import { listingFormSchema } from '@/lib/validationSchema'

const formData = {
  mainCategory: 'ConstructionMachine',
  subCategory: 'ConstructionMachine.MiniExcavator',
  // ... other fields
}

const result = listingFormSchema.safeParse(formData)
if (result.success) {
  // Data is valid
}
```

## UI Components

### Filter Bar with Dependent Dropdowns

The `FilterBar` component now supports dependent category selection:

```typescript
<FilterBar
  selectedType={type}
  onTypeChange={setType}
  selectedSort={sort}
  onSortChange={setSort}
  selectedMainCategory={mainCategory}
  onMainCategoryChange={setMainCategory}
  selectedSubCategory={subCategory}
  onSubCategoryChange={setSubCategory}
/>
```

**Behavior:**
1. User selects a main category (e.g., "Motorcycles")
2. Sub-category dropdown automatically populates with relevant options (e.g., "Touring", "Sport", etc.)
3. Changing main category automatically resets sub-category to null
4. Sub-category dropdown is disabled when no main category is selected

## Data Persistence

Categories are persisted using the useKV hook or standard React state:

```typescript
// For persistence across sessions
const [mainCategory, setMainCategory] = useKV<MainCategory | null>('user-main-category', null)
const [subCategory, setSubCategory] = useKV<VehicleSubCategoryCode | null>('user-sub-category', null)

// For temporary state
const [mainCategory, setMainCategory] = useState<MainCategory | null>(null)
const [subCategory, setSubCategory] = useState<VehicleSubCategoryCode | null>(null)
```

## Filtering Listings

```typescript
// Filter by main category
const filtered = listings.filter(listing => 
  listing.mainCategory === selectedMainCategory
)

// Filter by both main and sub-category
const filtered = listings.filter(listing => 
  listing.mainCategory === selectedMainCategory &&
  listing.subCategory === selectedSubCategory
)
```

## Mobile.de API Reference

These category codes are compatible with mobile.de's Upload-Interface CSV specification. For official documentation, refer to:

- **Endpoint Pattern**: `https://services.mobile.de/refdata/sites/GERMANY/classes/{class}/categories`
- **Classes**: Car, Motorbike, VanUpTo7500, TruckOver7500, ConstructionMachine, AgriculturalVehicle, Trailer, Caravan, SemiTrailer

## Best Practices

1. **Always validate** sub-category against main category before saving
2. **Reset sub-category** when main category changes
3. **Provide fallback** "All Sub-Categories" option in dropdowns
4. **Use TypeScript types** for type safety
5. **Test edge cases**: no selection, invalid combinations, etc.
6. **Persist user preferences** for better UX on return visits
7. **Mobile responsive**: ensure dropdowns work well on all screen sizes

## Testing Checklist

- [ ] User selects main category → sub-categories populate correctly
- [ ] User changes main category → sub-category resets to null
- [ ] User submits form with valid category combination → validation passes
- [ ] User submits form with invalid category combination → validation fails
- [ ] Filters work correctly with category selections
- [ ] Categories persist across page refreshes (if using useKV)
- [ ] Mobile view: dropdowns are usable and responsive
- [ ] Accessibility: keyboard navigation works for all dropdowns
